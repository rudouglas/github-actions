---
subject: Java agent
releaseDate: '2019-08-27'
version: 5.4.0
downloadLink: 'http://download.newrelic.com/newrelic/java-agent/newrelic-agent/5.4.0/'
---

### Notes

* x-ray and any x-ray related attributes and identifiers will no longer be available in this version of the java agent. The New Relic x-ray feature reached end-of-life on April 17, 2019

### Improvements

* OkHttp This release adds support for OkHttp 4.0. You will now see OkHttp calls as [external calls](https://docs.newrelic.com/docs/apm/applications-menu/monitoring/external-services-page) in New Relic.
* Agent configuration settings set via environment variables will be available on the Environment page.
* Improves performance of the Java agent.

### Fixes

* [Transaction Traces](https://docs.newrelic.com/docs/apm/transactions/transaction-traces/introduction-transaction-traces) would occasionally miss segments when using the spring @Async annotation with servlets.
* Jax-RS instrumentation was not starting transactions.
* A potential race condition during agent startup that would manifest as a NoClassDefFoundError for internal New Relic classes.
* Akka-http instrumentation would attempt multiple retransforms of the same class.
* The noticeError API would drop custom attributes that weren't of type String, Number, or Boolean, such as an Enum or other custom types.
