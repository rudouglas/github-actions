---
subject: Ruby agent
releaseDate: '2018-06-04'
version: 5.2.0.345
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-5.2.0.345.gem'
---

## v5.2.0

* Use priority sampling for errors and custom events

  Priority sampling replaces the older reservoir event sampling method. With this change, the agent will maintain randomness across a given time period while improving coordination among transactions, errors, and custom events.
* Bugfix for wrapping datastore operations

  The agent will now complete the process of wrapping datastore operations even if an error occurs during execution of a callback.
