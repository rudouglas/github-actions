---
subject: Ruby agent
releaseDate: '2018-09-11'
version: 5.4.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-5.4.0.347.gem'
---

## v5.4.0

* Capacity analysis for multi-threaded dispatchers

  Metrics around capacity analysis did not previously account for multi-threaded dispatchers and consequently could result in capacities of over 100% being recorded. This version now properly accounts for multi-threaded dispatchers.
* `NewRelic::Agent.disable_transaction_tracing` deprecated

  `NewRelic::Agent.disable_transaction_tracing` has been deprecated. Users are encouraged to use `NewRelic::Agent.disable_all_tracing` or `NewRelic::Agent.ignore_transaction` instead.
* Bugfix for SQL over-obfuscation

  A bug, introduced in v5.3.0, where SQL could be over-obfuscated for some database adapters has been fixed.
* Bugfix for span event data in Resque processes

  Previously, some users encountered a bug where span events would not be sent from Resque processes due to a missing endpoint, resulting in errors containing the text `NoMethodError: undefined method span_event_data`.

  Span events can now be successfully sent from Resque processes.
