---
subject: Ruby agent
releaseDate: '2018-03-26'
version: 5.0.0.342
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-5.0.0.342.gem'
---

### Notes

* SSL connections to New Relic are now mandatory

  Prior to this version, using an SSL connection to New Relic was the default behavior, but could be overridden. SSL connections are now enforced (not overrideable).
* Additional security checking before trying to explain multi-statement SQL queries

  Customer applications might submit SQL queries containing multiple statements (e.g., SELECT \* FROM table; SELECT \* FROM table). For security reasons, we should not generate explain plans in this situation.

  Although the agent correctly skipped explain plans for these queries during testing, we have added extra checks for this scenario.
* Bugfix for RabbitMQ exchange names that are symbols

  The agent no longer raises a TypeError when a RabbitMQ exchange name is a Ruby symbol instead of a string.
* Bugfix for audit logging to stdout

  Previous agents configured to log to stdout would correctly send regular agent logs to stdout, but would incorrectly send audit logs to a text file named "stdout". This release corrects the error.
* Bugfix for Capistrano deployment notifications on v3.7 and beyond

  Starting with version 3.7, Capistrano uses a different technique to determine a project's version control system. The agent now works correctly with this new behavior. Thanks to Jimmy Zhang for the contribution.
