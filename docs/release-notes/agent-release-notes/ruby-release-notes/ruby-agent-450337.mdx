---
subject: Ruby agent
releaseDate: '2017-09-28'
version: 4.5.0.337
---

### Notes

* Send synthetics headers even when CAT disabled

  The agent now sends synthetics headers whenever they are received from an external request, even if cross-application tracing is disabled.
* Bugfix for DelayedJob Daemonization

  Customers using the delayed_job script that ships with the gem may encounter an IOError with a message indicating the stream was closed. This was due to the agent attempting to write a byte into a Pipe that was closed during the deamonization of the delayed_job script. This issue has been fixed.
* Collect supportability metrics for public API

  The agent now collects Supportability/API/&#x7B;method} metrics to track usage of all methods in the agent's public API.
* Collect supportability metrics on `Module#prepend`

  The agent now collects Supportability/PrependedModules/&#x7B;Module} metrics for ActiveRecord 4 and 5, ActionController 4 and 5, ActionView 4 and 5, ActiveJob 5, and ActionCable 5. These help track the adoption of the `Module#prepend` method so we can maintain compatibility with newer versions of Ruby and Rails.
* Collect explain plans when using PostGIS ActiveRecord adapter

  The agent will now collect slow SQL explain plans, if configured to, on connections using the PostGIS adapter. Thanks Ari Pollak for the contribution!
* Lazily Intialize New Relic Config

  The agent will lazily initialize the New Relic config. This allows the agent to pickup configuration from environment variables set by dotenv and similar tools.
