---
subject: Node.js agent
releaseDate: '2016-09-27'
version: 1.30.4
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

### Improvements

* Fixed format of external calls metric.

  External service URLs will now be formatted the same as they are in the originating application.
* Improved instrumentation of native promises.

  Native promises now use the same instrumentation as Bluebird, making instrumentation easier to maintain and more consistent across libraries.

### Bug fixes

* Fixed issue with reloading normalization rules from the server.

  Upon reset, the agent will clear the existing naming rules, removing any vestigial rules that may have changed or been disabled.
* Fixed issue with key transactions Apdex metric.

  Key transactions now effect the global Apdex metric according to their own ApdexT instead of the default ApdexT value.
* Fixed issue with closing transactions when the request is aborted.

  Previously, aborted requests would result in the transaction remaining open indefinitely. Now the transaction will be correctly finished and its resources freed.
