---
subject: Node.js agent
releaseDate: '2017-08-23'
version: 2.2.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

### New features

* Added support for ignoring ranges of status codes.

  The configuration `error_collector.ignore_status_codes` can now take ranges of numbers. For example, `ignore_status_codes: ['400-404']` would ignore 400, 401, 402, 403, and 404.
* Experimental instrumentation for `async/await`

  This is experimental instrumentation and has not yet been tested in a wide array of production environments. The feature is currently off by default behind a feature flag. To enable this experimental instrumentation, add `await_support: true` to the `feature_flag` setting in your agent config file.

### Improvements

* Updated examples and documentation regarding custom transaction creation.

  All examples and documentation now point at the `newrelic.start*Transaction` methods.
* Transaction state is now maintained in `ChildProcess` event listeners.
* Reducing logging verbosity in the SQL query obfuscator.

### Bug fixes

* Fixed a bug when a custom collector port was provided in the configuration that prevented redirected connections from working.
* Fixed a bug in `Shim#record` that could cause an exception when trying to create a new segment as part of an ended/inactive transaction.
* Fixed issue with custom Hapi handlers causing an error.

  Previously custom Hapi handlers defined using the `server.handler()` method were causing the Hapi server to return a 500 error. Now they are correctly handled and recorded as middleware functions.
