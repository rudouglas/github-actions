---
subject: Node.js agent
releaseDate: '2018-08-27'
version: 4.8.1
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

### Improvements

* Converted File System instrumentation to use newer shim style.
* Converted DNS instrumentation to newer shim style.
* Added tracking of callbacks to DNS instrumentation.
* Converted crypto instrumentation to newer shim style.
* Updated domains instrumentation to use an instrumentation shim.
* Refactored the global instrumentation to use the shim API.
* Ported inspector instrumentation to use an instrumentation shim.
* Ported async_hooks based promise instrumentation over to using shims.
* Added shim types for core instrumentations.
* Improved benchmark comparison output.
* Added `http` benchmark tests.

### Bug fixes

* Agent instrumentation will no longer interfere with promisification of core methods.

  Some core methods expose pre-promisified versions of the methods as a reference on the method itself. When instrumenting these methods, it neglected to forward these references onto the wrapper function. Now the instrumentation will properly forward property look ups to the original method.
* Fixed outbound https call to use example.com to resolve integration test issue.
* Fixed tests for ioredis 4.0.0 and above.
