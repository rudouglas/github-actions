---
subject: Node.js agent
releaseDate: '2016-07-07'
version: 1.28.2
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

### Improvements

* Director instrumentation that will now name the transaction correctly, as well as create segments corresponding to the handlers registered with director.
* Transaction naming refactor - this should clear up some inconsistent naming issues in our router instrumentations.

  Previously the instrumentation was tasked with the maintenance of the transaction state name, now this has been abstracted into its own class to be used by instrumentations.
* Express instrumentation refactored to scope transaction storage to the incoming request object.

  Previously the express instrumentation used a stack to track which router was expecting middleware to finish and keep track of which transaction is being executed. The new implementation has a stronger guarantee on scoping work to the correct transaction.

### Bug fixes

* The agent now uses the correct units (was seconds, now milliseconds) for slow queries - this fixes and issue where query traces in the databases tab were slower than the reported maximum.
