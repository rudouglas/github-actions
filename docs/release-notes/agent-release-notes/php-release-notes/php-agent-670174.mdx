---
subject: PHP agent
releaseDate: '2016-09-21'
version: 6.7.0.174
---

### New Features

* PHPUnit test events

  Support has been added for the popular unit test library PHPUnit (versions 3.7 to 5.5, inclusive). When enabled, the agent reports test results as custom Insights events. Test suite summary data are sent as `TestSuite` events, while individual test cases are sent as `Test` events.

  You can enable this feature in your newrelic.ini file with `newrelic.phpunit_events.enabled = true`. Depending on your events retention policy, enabling this setting may impact your New Relic billing statement.

  Read more about this feature [on our documentation site](https://docs.newrelic.com/docs/agents/php-agent/frameworks-libraries/analyze-phpunit-test-data-insights).
* Support has been added for Slim Framework 2.x and 3.x.

### Upgrade Notices

* To avoid potential deadlocks, MySQL SELECT queries that use the [`FOR UPDATE` or `LOCK IN SHARE MODE`](http://dev.mysql.com/doc/refman/5.7/en/innodb-locking-reads.html) suffixes will no longer generate explain plans.

### Bug Fixes

* Automatic page load timing instrumentation was broken on PHP 5.4-7.0 in certain edge cases: most notably, when the `<head>` element was not in the first 40kB of the page content, or when the `</body>` element was not in the last few kilobytes of content. This has been fixed.
* Prevent real user monitoring JavaScript injection when the Content-Type is first set to text/html then subsequently changed to something else (for example, application/json). This was a regression introduced in version 6.2.
