---
subject: PHP agent
releaseDate: '2020-02-11'
version: 9.7.0.258
downloadLink: 'https://download.newrelic.com/php_agent/archive/9.7.0.258'
---

### New Features

**Avoid potential memory exhaustion for long running transactions**

* The configuration settings [`newrelic.transaction_tracer.max_segments_cli`](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-maxsegcli) and [`newrelic.transaction_tracer.max_segments_web`](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-maxsegweb) were added. These settings can be used to limit the number of segments the PHP agent records during a CLI transaction and a web transaction respectively.

  `newrelic.transaction_tracer.max_segments_cli` defaults to `100000` and thus avoids potential memory exhaustion for long running CLI transactions.

  `newrelic.transaction_tracer.max_segments_web` defaults to `0`, meaning that the PHP Agent shall capture all segments during a web transaction.

  For more information, see the documentation about the [PHP agent configuration](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-settings).

**Performance improvements**

* The PHP agent now creates segments in a more efficient way, which results in improved performance.

### Bug fixes

* The Debian init script now uses `pidof` instead of `ps`. This solves issues related to starting the daemon with systemctl on Debian. Previously, the daemon would start and immediately stop.
