---
subject: PHP agent
releaseDate: '2017-03-23'
version: 7.1.0.187
---

### New Features

* Added support for the MongoDB library

  The PHP agent now supports the MongoDB userland library, which is the recommended interface to the mongodb extension. Users of this library will see new metrics in the Databases tab, nodes in transaction traces, and breakdown metrics on individual transaction pages.
* Database instance information available for Redis, Predis, and MongoDB

  Queries and commands issued using the PECL Redis extension, the Predis library, and the MongoDB library now capture instance information. Transaction traces now include the name of the host (including the port or socket) and database that the query was run against.

  Collection of host information can be disabled by setting `newrelic.datastore_tracer.instance_reporting.enabled = false` in the `newrelic.ini`. Similarly, the database name can be omitted with `newrelic.datastore_tracer.database_name_reporting.enabled = false`.

### Upgrade Notices

* Commands in Predis pipelines are now reported individually, rather than being rolled into a single `pipeline` query.

### Bug Fixes

* When using PHP 7.0 or 7.1, calling `curl_setopt()` with the `CURLOPT_HTTPHEADER` option and an array with elements that have been accessed by reference (for example, with `foreach ($array as $k => &$v)`) would result in the headers used by New Relic to track external calls overwriting other custom headers. This has been fixed.
